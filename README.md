# npe-gql-client

Reproduce NPE for Gql client on build.
Quarkus 3.8.3 build fine, but 3.9.1(and .0) crash with
```
[ERROR] Failed to execute goal io.quarkus.platform:quarkus-maven-plugin:3.9.1:build (default) on project npe-gql-client: Failed to build quarkus application: io.quarkus.builder.BuildException: Build failure: Build failed due to errors
[ERROR]         [error]: Build step io.quarkus.smallrye.graphql.client.deployment.SmallRyeGraphQLClientProcessor#buildClientModel threw an exception: java.lang.NullPointerException: Cannot invoke "org.jboss.jandex.ClassInfo.methods()" because the return value of "org.jboss.jandex.IndexView.getClassByName(org.jboss.jandex.DotName)" is null
[ERROR]         at io.smallrye.graphql.client.model.helper.TypeModel.hasScalarConstructor(TypeModel.java:270)
[ERROR]         at io.smallrye.graphql.client.model.helper.TypeModel.isScalar(TypeModel.java:260)
[ERROR]         at io.smallrye.graphql.client.model.helper.OperationModel.recursionCheckedFields(OperationModel.java:91)
[ERROR]         at io.smallrye.graphql.client.model.helper.OperationModel.fields(OperationModel.java:75)
[ERROR]         at io.smallrye.graphql.client.model.helper.OperationModel.field(OperationModel.java:141)
[ERROR]         at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
[ERROR]         at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
[ERROR]         at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
[ERROR]         at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)
[ERROR]         at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1939)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
[ERROR]         at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
[ERROR]         at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
[ERROR]         at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
[ERROR]         at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
[ERROR]         at io.smallrye.graphql.client.model.helper.OperationModel.recursionCheckedFields(OperationModel.java:105)
[ERROR]         at io.smallrye.graphql.client.model.helper.OperationModel.fields(OperationModel.java:75)
[ERROR]         at io.smallrye.graphql.client.model.helper.OperationModel.field(OperationModel.java:141)
[ERROR]         at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
[ERROR]         at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
[ERROR]         at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
[ERROR]         at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)
[ERROR]         at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1939)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
[ERROR]         at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
[ERROR]         at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
[ERROR]         at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
[ERROR]         at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
[ERROR]         at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
[ERROR]         at io.smallrye.graphql.client.model.helper.OperationModel.recursionCheckedFields(OperationModel.java:105)
[ERROR]         at io.smallrye.graphql.client.model.helper.OperationModel.fields(OperationModel.java:75)
[ERROR]         at io.smallrye.graphql.client.model.QueryBuilder.build(QueryBuilder.java:54)
[ERROR]         at io.smallrye.graphql.client.model.ClientModelBuilder.lambda$generateClientModels$0(ClientModelBuilder.java:62)
[ERROR]         at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
[ERROR]         at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
[ERROR]         at io.smallrye.graphql.client.model.ClientModelBuilder.lambda$generateClientModels$1(ClientModelBuilder.java:61)
[ERROR]         at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
[ERROR]         at java.base/java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1116)
[ERROR]         at io.smallrye.graphql.client.model.ClientModelBuilder.generateClientModels(ClientModelBuilder.java:57)
[ERROR]         at io.smallrye.graphql.client.model.ClientModelBuilder.build(ClientModelBuilder.java:38)
[ERROR]         at io.quarkus.smallrye.graphql.client.deployment.SmallRyeGraphQLClientProcessor.buildClientModel(SmallRyeGraphQLClientProcessor.java:205)
[ERROR]         at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
[ERROR]         at java.base/java.lang.reflect.Method.invoke(Method.java:580)
[ERROR]         at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:849)
[ERROR]         at io.quarkus.builder.BuildContext.run(BuildContext.java:256)
[ERROR]         at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)
[ERROR]         at org.jboss.threads.EnhancedQueueExecutor$Task.doRunWith(EnhancedQueueExecutor.java:2516)
[ERROR]         at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2495)
[ERROR]         at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1521)
[ERROR]         at java.base/java.lang.Thread.run(Thread.java:1583)
[ERROR]         at org.jboss.threads.JBossThread.run(JBossThread.java:483)
```

Setting a break point on `TypeModel.java:270` reveals that the type in question is `java.util.Concurrency`, 
used in `EnergyPriceSpecification.priceCurrency`